<!DOCTYPE html>
<html lang="">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Java 集合框架 Map 接口 - Jimall的博客</title><meta name="Description" content=""><meta property="og:title" content="Java 集合框架 Map 接口" />
<meta property="og:description" content="图示：
Map 通过 key-value 形式存元素，每个元素称为 entry，即一个 entry 包含 key 和 value 两个值。
Map 接口 api 信息：isEmpty(), size()
添加修改：put(key, value) 如果 key 存在就会修改，否则添加
查找：containKey(), containValue()
遍历：entrySet() 返回映射关系的 set 视图，keySet() 返回 key 的 set 视图，values() 返回 value 的 collection 视图
删除：remove(key)，clear()
常用集合 HashMap 了解 HashMap，首先需要了解哈希算法：
哈希冲突及四种解决方法
四种解决方法：
  开放地址法
     拉链法
  建立公共溢出区
建立公共溢出区存储所有哈希冲突的数据。
  再哈希法
  然后需要了解红黑树：
红黑树介绍和实现
总结：
 红黑树是平衡的二叉查找树，和 AVL tree 是类似的，不同的是 AVL tree 和红黑树维持平衡的规则不太一样。 红黑树的关键性质：  每个结点要么是红的要么是黑的。 根结点是黑的。 每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。 如果一个结点是红的，那么它的两个儿子都是黑的。 对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。   理解红黑树的关键是理解平衡和理解二叉查找树，二叉查找树插入、删除和查找的开销都是 O(h)，由于红黑树平衡，那么 h 最大为 log(n)，所以红黑树插入、删除和查找的开销为 log(n)  开始看 HashMap 解析博文，根据博文再看 HashMap 源码进行理解：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-22T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-06-22T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java 集合框架 Map 接口"/>
<meta name="twitter:description" content="图示：
Map 通过 key-value 形式存元素，每个元素称为 entry，即一个 entry 包含 key 和 value 两个值。
Map 接口 api 信息：isEmpty(), size()
添加修改：put(key, value) 如果 key 存在就会修改，否则添加
查找：containKey(), containValue()
遍历：entrySet() 返回映射关系的 set 视图，keySet() 返回 key 的 set 视图，values() 返回 value 的 collection 视图
删除：remove(key)，clear()
常用集合 HashMap 了解 HashMap，首先需要了解哈希算法：
哈希冲突及四种解决方法
四种解决方法：
  开放地址法
     拉链法
  建立公共溢出区
建立公共溢出区存储所有哈希冲突的数据。
  再哈希法
  然后需要了解红黑树：
红黑树介绍和实现
总结：
 红黑树是平衡的二叉查找树，和 AVL tree 是类似的，不同的是 AVL tree 和红黑树维持平衡的规则不太一样。 红黑树的关键性质：  每个结点要么是红的要么是黑的。 根结点是黑的。 每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。 如果一个结点是红的，那么它的两个儿子都是黑的。 对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。   理解红黑树的关键是理解平衡和理解二叉查找树，二叉查找树插入、删除和查找的开销都是 O(h)，由于红黑树平衡，那么 h 最大为 log(n)，所以红黑树插入、删除和查找的开销为 log(n)  开始看 HashMap 解析博文，根据博文再看 HashMap 源码进行理解："/>
<meta name="application-name" content="Jimall的博客">
<meta name="apple-mobile-web-app-title" content="Jimall的博客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" /><link rel="prev" href="https://jimall.github.io/leetcode-086-%E5%88%86%E9%9A%94%E9%93%BE%E8%A1%A8/" /><link rel="next" href="https://jimall.github.io/spring%E7%BB%93%E5%90%88junit%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Java 集合框架 Map 接口",
        "inLanguage": "",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jimall.github.io\/04.map-%E6%8E%A5%E5%8F%A3\/"
        },"image": ["https:\/\/jimall.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  185 ,
        "url": "https:\/\/jimall.github.io\/04.map-%E6%8E%A5%E5%8F%A3\/","datePublished": "2021-06-22T00:00:00+00:00","dateModified": "2021-06-22T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/jimall.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "xxxx"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jimall的博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jimall的博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Java 集合框架 Map 接口</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>xxxx</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/java/"><i class="far fa-folder fa-fw"></i>Java</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-06-22">2021-06-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 185 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 1 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#map-接口-api">Map 接口 api</a></li>
    <li><a href="#常用集合">常用集合</a>
      <ul>
        <li><a href="#hashmap">HashMap</a></li>
        <li><a href="#linkedhashmap">LinkedHashMap</a></li>
        <li><a href="#treemap">TreeMap</a></li>
        <li><a href="#concurrenthashmap">ConcurrentHashMap</a></li>
        <li><a href="#hashtable">Hashtable</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>图示：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png"
        data-srcset="https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png, https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png 1.5x, https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png"
        title="https://cdn.jsdelivr.net/gh/SUSTechee/images/blog/20210310083541.png" /></p>
<p>Map 通过 key-value 形式存元素，每个元素称为 entry，即一个 entry 包含 key 和 value 两个值。</p>
<h2 id="map-接口-api">Map 接口 api</h2>
<p>信息：isEmpty(), size()</p>
<p>添加修改：put(key, value) 如果 key 存在就会修改，否则添加</p>
<p>查找：containKey(), containValue()</p>
<p>遍历：entrySet() 返回映射关系的 set 视图，keySet() 返回 key 的 set 视图，values() 返回 value 的 collection 视图</p>
<p>删除：remove(key)，clear()</p>
<h2 id="常用集合">常用集合</h2>
<h3 id="hashmap">HashMap</h3>
<p>了解 HashMap，首先需要了解哈希算法：</p>
<p><a href="https://www.cnblogs.com/higerMan/p/11907117.html" target="_blank" rel="noopener noreffer">哈希冲突及四种解决方法</a></p>
<p>四种解决方法：</p>
<ol>
<li>
<p>开放地址法</p>
<ol>
<li></li>
</ol>
</li>
<li>
<p>拉链法</p>
</li>
<li>
<p>建立公共溢出区</p>
<p>建立公共溢出区存储所有哈希冲突的数据。</p>
</li>
<li>
<p>再哈希法</p>
</li>
</ol>
<p>然后需要了解红黑树：</p>
<p><a href="https://blog.csdn.net/v_JULY_v/article/details/6105630" target="_blank" rel="noopener noreffer">红黑树介绍和实现</a></p>
<p>总结：</p>
<ul>
<li>红黑树是平衡的二叉查找树，和 AVL tree 是类似的，不同的是 AVL tree 和红黑树维持平衡的规则不太一样。</li>
<li>红黑树的关键性质：
<ul>
<li>每个结点要么是红的要么是黑的。</li>
<li>根结点是黑的。</li>
<li>每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。</li>
<li>如果一个结点是红的，那么它的两个儿子都是黑的。</li>
<li>对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。</li>
</ul>
</li>
<li>理解红黑树的关键是理解平衡和理解二叉查找树，二叉查找树插入、删除和查找的开销都是 O(h)，由于红黑树平衡，那么 h 最大为 log(n)，所以红黑树插入、删除和查找的开销为 log(n)</li>
</ul>
<p>开始看 HashMap 解析博文，根据博文再看 HashMap 源码进行理解：</p>
<p><a href="https://zhuanlan.zhihu.com/p/38615394" target="_blank" rel="noopener noreffer">HashMap 结构详解</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/127147909" target="_blank" rel="noopener noreffer">HashMap 详解</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/127147909" target="_blank" rel="noopener noreffer">HashMap 原理详解（面试题）</a></p>
<p>总结：</p>
<ul>
<li>HashMap 的底层是数组、链表和红黑树</li>
<li>数组是用于进行映射的，hashCode 之后就可以直接存在数组上，然后就可以 O(1) 查找，同时数组长度不够的时候带有扩容机制 resize，但是注意 resize 是很耗性能的</li>
<li>hashCode 之后会产生 hash 碰撞，这样在数组上的同一位置会有多个结果，所以用链表串起来，在查找的时候再搜一遍链表即可</li>
<li>链表的搜索复杂度为 O(n)，这样链表太长的情况下会很慢，这个时候，把链表想象成极端情况下的二叉树，就不难想到把链表平衡树化，采取的操作是构建为红黑树，这样平衡之后就可以 O(logn) 搜索</li>
<li>HashMap 线程不安全</li>
</ul>
<h3 id="linkedhashmap">LinkedHashMap</h3>
<p>LinkedHashMap 和 HashMap 几乎一样，事实上，LinkedHashMap 继承自 HashMap 唯一的不同在于遍历顺序上：</p>
<p><a href="https://sunweiguo.github.io/2019/01/20/java-collection/8.HashMap%E5%92%8CLinkedHashMap%E9%81%8D%E5%8E%86%E6%9C%BA%E5%88%B6/" target="_blank" rel="noopener noreffer">LinkedHashMap 和 HashMap 比较</a></p>
<p>总结：</p>
<ul>
<li><code>HashMap</code>的输出顺序与元素的输入顺序无关，因为遍历的时候它自己根据读取方便来确定散列值取数据，<code>LinkedHashMap</code>可以按照输入顺序输出，也可以根据读取元素的顺序输出</li>
</ul>
<p><a href="https://www.jianshu.com/p/181df0893158" target="_blank" rel="noopener noreffer">LinkedHashMap 详解</a></p>
<p>总结：</p>
<ul>
<li>LinkedHashMap 维护了一个 LinkedHashMapEntry 双向链表，在遍历的时候 iterator 在 LinkedHashMapEntry 上遍历。</li>
</ul>
<h3 id="treemap">TreeMap</h3>
<p><a href="https://www.jianshu.com/p/d9ad7f6d75a0" target="_blank" rel="noopener noreffer">TreeMap 详解</a></p>
<p>总结：</p>
<ul>
<li>TreeMap 就是一棵红黑树，有可以排序的特性</li>
</ul>
<p><a href="https://blog.csdn.net/xlgen157387/article/details/47907721#:~:text=HashMap%E5%92%8CTreeMap%E6%AF%94%E8%BE%83,Map%E6%97%B6%E5%80%99%E6%89%8D%E7%94%A8TreeMap." target="_blank" rel="noopener noreffer">TreeMap 和 HashMap 的比较</a></p>
<p>总结：</p>
<ul>
<li>HashMap:适用于在Map中插入、删除和定位元素。</li>
<li>Treemap:适用于按自然顺序或自定义顺序遍历键（key）。</li>
<li>HashMap通常比TreeMap快一点（树和哈希表的数据结构使然），建议多使用HashMap,在需要排序的Map时候才用TreeMap.</li>
<li>HashMap 非线程安全 TreeMap 非线程安全</li>
<li>HashMap的结果是没有排序的，而TreeMap输出的结果是排好序的。</li>
</ul>
<h3 id="concurrenthashmap">ConcurrentHashMap</h3>
<p><a href="https://zhuanlan.zhihu.com/p/40327960" target="_blank" rel="noopener noreffer">ConcurrentHashMap 和 HashMap 的对比</a></p>
<p>总结：</p>
<ul>
<li>ConcurrentHashMap 采用了分段锁技术，其中 Segment 继承于 ReentrantLock。不会像 HashTable 那样不管是 put 还是 get 操作都需要做同步处理，理论上 ConcurrentHashMap 支持 CurrencyLevel (Segment 数组数量)的线程并发。每当一个线程占用锁访问一个 Segment 时，不会影响到其他的 Segment。</li>
</ul>
<h3 id="hashtable">Hashtable</h3>
<p>Hashtable 和 HashMap 实现很类似，但是有一定的不同：</p>
<p><strong>1.实现</strong>：HashMap继承的类是AbstractMap类，而Hashtable继承的是Dictionary类，而Dictionary是一个过时的类，因此通常情况下建议使用HashMap而不是使用Hashtable</p>
<p><strong>2.内部结构</strong>：其实HashMap与Hashtable内部基本都是使用<strong>数组-链表</strong>的结构，但是HashMap引入了红黑树的实现，内部相对来说更加复杂而性能相对来说应该更好</p>
<p><strong>3.NULL值控制</strong>：通过前面的介绍我们知道Hashtable是不允许key-value为null值的，Hashtable对于key-value为空的情况下将抛出NullPointerException，而HashMap则是允许key-value为null的，HashMap会将key=null方法index=0的位置。</p>
<p><strong>4.线程安全</strong>：通过阅读源码可以发现Hashtable的方法中基本上都是有synchronized关键字修饰的，但是HashMap是线程不安全的，故对于单线程的情况下来说HashMap的性能更优于Hashtable，单线程场景下建议使用HashMap.</p>
<p>在源码里面经常出现 transient 关键字：<a href="https://www.cnblogs.com/lanxuezaipiao/p/3369962.html" target="_blank" rel="noopener noreffer">transient 关键字</a>，总结来说就是：为我们提供了便利，你只需要实现Serilizable接口，将不需要序列化的属性前添加关键字transient，序列化对象的时候，这个属性就不会序列化到指定的目的地中</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-06-22</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/04.map-%E6%8E%A5%E5%8F%A3/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" data-title="Java 集合框架 Map 接口" data-via="xxxx"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" data-title="Java 集合框架 Map 接口"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" data-title="Java 集合框架 Map 接口"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://jimall.github.io/04.map-%E6%8E%A5%E5%8F%A3/" data-title="Java 集合框架 Map 接口"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/leetcode-086-%E5%88%86%E9%9A%94%E9%93%BE%E8%A1%A8/" class="prev" rel="prev" title="Leetcode-086-分隔链表"><i class="fas fa-angle-left fa-fw"></i>Leetcode-086-分隔链表</a>
            <a href="/spring%E7%BB%93%E5%90%88junit%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="next" rel="next" title="Spring结合Junit进行单元测试">Spring结合Junit进行单元测试<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">xxxx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":100},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
