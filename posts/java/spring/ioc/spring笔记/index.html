<!doctype html><html class="h-full w-full font-sans" lang=en-us><head><meta charset=utf-8><link rel="shortcut icon" href=https://Jimall.github.io/favicon.ico type=image/x-icon><meta name=viewport content="width=device-width,initial-scale=1"><title>Spring IoC 组件详解 - BLOG</title><link rel=stylesheet href=/css/styles.min.4c080db7fce41f0a8332e8eb8b4c79d69d962494eb4cb5ed4d60a61cccf1226df26cccda2c9d017ab61334d2c781bf23dfc392841b9d6e18733bd790025d9a2c.css integrity=sha512-TAgNt/zkHwqDMujri0x51p2WJJTrTLXtTWCmHMzxIm3ybMzaLJ0BerYTNNLHgb8j38OShBudbhhzO9eQAl2aLA==><script>localStorage.theme==='dark'||!('theme'in localStorage)&&window.matchMedia('(prefers-color-scheme: dark)').matches?document.documentElement.classList.add('dark'):document.documentElement.classList.remove('dark')</script></head><body class="flex flex-col items-center w-full"><main class="w-full sm:w-10/12 md:w-9/12 lg:w-7/12 xl:w-5/12 m-auto px-6"><header class="mt-9 mb-8"><div class="flex justify-between items-center"><div class="flex items-center"><input id=navbar_btn class=hidden type=checkbox>
<label for=navbar_btn class="menu-btn mr-4 items-center flex xl:hidden"><span class=navicon></span></label><a href=/ class="font-bold text-lg xl:text-2xl mr-auto">BLOG</a></div><div class="flex items-center"><div class="cursor-pointer ml-2"><svg id="dark_mode_btn" class="hidden" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></svg><svg id="light_mode_btn" class="hidden" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><g><path d="M0 0h24v24H0V0z" fill="none"/></g><g><g><g><path d="M14 2c1.82.0 3.53.5 5 1.35C16.01 5.08 14 8.3 14 12s2.01 6.92 5 8.65C17.53 21.5 15.82 22 14 22 8.48 22 4 17.52 4 12S8.48 2 14 2z"/></g></g></g></svg></svg></div><div id=translation_wrapper class="relative flex items-center cursor-pointer text-xs ml-2 py-2"><svg id="translation_btn" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93.0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55.0 1-.45 1-1V7h2c1.1.0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41.0 2.08-.8 3.97-2.1 5.39z"/></svg></svg>
<span class="hidden ml-1 sm:block">Tech</span><ul id=translation_menu class="absolute top-full left-0 rounded hidden w-max shadow-xl z-10"><li class="px-2 py-1.5"><a href=https://Jimall.github.io/zh/>Thoughts</a></li><li class="px-2 py-1.5"><a href=https://Jimall.github.io/>Tech</a></li><li class="px-2 py-1.5"><a href=https://Jimall.github.io/bangumi/>Bangumi</a></li></ul></div><div class="ml-2 sep hidden sm:block"></div><div class="ml-2 relative flex items-center"><svg id="search_btn" class="cursor-pointer" width="18" height="18" viewBox="2 0 20 20"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61.0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></svg><div id=search_menu_wrapper class="hidden justify-center fixed top-0 left-0 w-full h-full z-40"><div id=search_menu class="fixed flex flex-col w-full h-full sm:h-auto sm:top-24 sm:bottom-24 rounded-none sm:rounded-md sm:w-120 z-50"><div class="flex min-h-10 shadow-md"><div class="flex flex-grow"><input id=search_menu_input class="flex-grow focus:outline-none px-4 rounded-tl-md" type=text placeholder></div><div id=search_menu_close_btn class="flex items-center justify-center w-10 rounded-tr-md cursor-pointer"><svg width="14" height="14" viewBox="3 3 18 18"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></svg></div></div><div id=search_menu_results class="flex-grow overflow-y-auto"></div></div></div></div></div></div><nav id=navbar class="mt-3 hidden xl:block"><ul class=flex><li class="navbar-item text-sm border-b-2 pb-1 mr-2 font-medium inactive"><a href=/posts/leetcode/problem/>Leetcode</a></li><li class="navbar-item text-sm border-b-2 pb-1 mr-2 font-medium inactive"><a href=/posts/java/java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/>Java</a></li></ul></nav><nav id=navbar_sm class="mt-2 hidden"><ul><li class="text-sm mt-2"><a href=/posts/leetcode/problem/>Leetcode</a></li><li class="text-sm mt-2"><a href=/posts/java/java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/>Java</a></li></ul><hr class=my-4></nav></header><div id=content class=my-8><div class="toc-wrapper my-8 p-4 border-2 rounded leading-6"><span class=font-bold></span><nav id=TableOfContents><ul><li><a href=#ioc>IoC</a><ul><li><a href=#什么是-ioc>什么是 IoC？</a></li><li><a href=#ioc-能做什么>IoC 能做什么？</a></li><li><a href=#di>DI</a></li><li><a href=#ioc-demo-和详细使用>IoC Demo 和详细使用</a></li><li><a href=#参考>参考</a></li></ul></li><li><a href=#ioc-底层原理>IoC 底层原理</a></li></ul></nav></div><div class=my-7><article class=line-numbers><p>Spring 有两大核心机制：</p><ol><li>IoC (Inverse of Control, 控制反转)</li><li>AOP (Aspect-Oriented Programming, 面向切面编程)</li></ol><p>学习 Spring 的核心（单指 Spring 本身，不包括别的组件）就在于学习理解这两大核心机制。</p><p>这篇文章我们来讲讲 IoC。</p><h2 id=ioc>IoC</h2><p>IoC 是 Spring 的核心机制。</p><h3 id=什么是-ioc>什么是 IoC？</h3><p>IoC (Inversion of Control)，即“控制反转”。它不是一种技术，而是一种设计思想。在 Java 开发中，IoC 意味着将你设计好的对象交给容器控制，而不是在你的对象内部控制（控制的意思是说对象内部需要通过 new 等方式创建依赖对象，需要我们自己进行创建）。</p><p>如何理解好 IoC 呢？理解好 Ioc 的关键是要明确”谁控制谁？控制什么？为何是反转？哪些方面反转了？”：</p><p>”谁控制谁？控制什么？“：在传统 Java SE 程序设计中，我们直接在对象内部通过 new 创建对象，是对象主动去创建依赖对象，而 <strong>IoC 通过一个专门的容器（称为 IoC 容器）来创建这些对象</strong>；谁控制谁？<strong>IoC 容器控制了对象</strong>；控制什么？<strong>控制了外部资源获取</strong>（不只是对象包括比如文件等）。</p><p>“为何是反转？哪些方面反转了？”：有反转就有正转，传统应用程序由我们自己在程序中主动控制去获取依赖对象，也就是正转，而反转则是由容器来帮忙创建及注入依赖对象；为何是反转？<strong>因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转</strong>；哪些方面反转了？<strong>依赖对象的获取反转</strong>。</p><p>所以控制反转的意思就是，<strong>IoC 容器控制对象，让依赖对象的获取反转</strong>。</p><h3 id=ioc-能做什么>IoC 能做什么？</h3><p>IoC 不是一种技术，而是一种设计思想，一个重要的面向对象编程的法则，<strong>它能指导我们如何设计出松耦合、更优良的程序</strong>。传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试。有了IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是松散耦合，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。</p><p>IoC 很好的体现了面向对象设计法则中的好莱坞法则：“别找我们，我们找你”，即由 IoC 容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。</p><h3 id=di>DI</h3><p>DI (Dependency Injection) 依赖注入。这也是 Spring 中的一个重要概念。</p><p>依赖注入：组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中。依赖注入的目的并非为软件系统带来更多功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。</p><p>理解 DI 的关键是：“谁依赖谁？为什么需要依赖？谁注入谁？注入了什么？”：</p><p>”谁依赖于谁？“：<strong>应用程序依赖于 IoC 容器</strong></p><p>”为什么需要依赖？“：<strong>应用程序需要 IoC 容器来提供对象需要的外部资源</strong></p><p>“谁注入谁？”：<strong>IoC 容器注入应用程序某个对象，应用程序依赖的对象</strong></p><p>”注入了什么？“：<strong>注入某个对象所需要的外部资源（包括对象、资源、常量数据）</strong></p><p><strong>IoC 和 DI 有什么关系呢？其实它们是同一个概念的不同角度描述</strong>，由于控制反转概念比较含糊（可能只是理解为容器控制对象这一个层面，很难让人想到谁来维护对象关系），所以 2004 年大师级人物 Martin Fowler 又给出了一个新的名字：“依赖注入”，相对 IoC 而言，“依赖注入”明确描述了“被注入对象依赖 IoC 容器配置依赖对象”。</p><h3 id=ioc-demo-和详细使用>IoC Demo 和详细使用</h3><p>demo 放在代码里面，这样可以结合代码进行理解</p><h3 id=参考>参考</h3><p>IoC 部分，参考：</p><p><a href=https://blog.csdn.net/GoGleTech/article/details/79557416>https://blog.csdn.net/GoGleTech/article/details/79557416</a></p><h2 id=ioc-底层原理>IoC 底层原理</h2></article></div></div><footer class="my-8 w-full text-center text-xs"><article>KON！</article></footer></main><script src=/js/header.0b11855b871cb4d10c6c07b6723b9209f5c2bc9100735ab6ff47c8f9b76bb3d6ae41b488083b5fb15697987334039eb651b25c83228c29ac48a2bc168db8a894.js integrity="sha512-CxGFW4cctNEMbAe2cjuSCfXCvJEAc1q2/0fI+bdrs9auQbSICDtfsVaXmHM0A562UbJcgyKMKaxIorwWjbiolA=="></script><script src=/js/multilingual.84eb767ebf77f5840471f65eceeb3b8a86b56bff9bf4de1e1da7caa0331440cd7ecfeff6bb26884c7ce0df1e258ed80ec90c80a92bb2fa2bbe550c602c181bbe.js integrity="sha512-hOt2fr939YQEcfZezus7ioa1a/+b9N4eHafKoDMUQM1+z+/2uyaITHzg3x4ljtgOyQyAqSuy+iu+VQxgLBgbvg=="></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=/js/math.d7efde37b2eb8879651e1f4489bcd4d8203b8c2bf8ca12c9e1b8cd11bfd6395b172f4999fff43ce0d047889a2bdb71ee74aebbae5327590192d1144e790fcd7b.js integrity="sha512-1+/eN7LriHllHh9EibzU2CA7jCv4yhLJ4bjNEb/WOVsXL0mZ//Q84NBHiJor23HudK67rlMnWQGS0RROeQ/New=="></script><script src=/js/search-en-us.min.13227239449aa3f6c0a7698ac4bf80b4c6cd135fa8720c3a6016136f68162ef55edce2b9fbe8c9c8e2bdf667528c7e6400ae822cc5e3ebf218b960586d463f4a.js integrity="sha512-EyJyOUSao/bAp2mKxL+AtMbNE1+ocgw6YBYTb2gWLvVe3OK5++jJyOK99mdSjH5kAK6CLMXj6/IYuWBYbUY/Sg=="></script></body></html>