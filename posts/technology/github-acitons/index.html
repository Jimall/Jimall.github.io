<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用 Github actions 自动发布 Hugo 博客 | Jimall's Blog</title>
<meta name=keywords content="GitHub Actions"><meta name=description content="使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。
搞的过程中坑比较多，记录为一个教程，供各位参考。
我折腾过程中的参考：https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/
创建代码仓库和 github pages 仓库 构建过程中采用两个仓库：
代码仓库，github pages 在这里构建并发布，我们设为 username.github.io.source github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 username.github.io （username 改为你自己的 github username） 简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。
创建 github pages 仓库 没啥特别，github 上创建一个空仓库 username.github.io
创建代码仓库 这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：
github 创建空仓库 username.github.io.source
本地找个空文件夹，比如叫 HugoBlog，进去之后初始化 Hugo Blog：hugo new site . 初始化 git 仓库：git init 添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 joway/hugo-theme-yinyang，那么命令为：git submodule add git@github."><meta name=author content><link rel=canonical href=https://jimall-blog.vercel.app/posts/technology/github-acitons/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://jimall-blog.vercel.app/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jimall-blog.vercel.app/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jimall-blog.vercel.app/favicon-32x32.png><link rel=apple-touch-icon href=https://jimall-blog.vercel.app/apple-touch-icon.png><link rel=mask-icon href=https://jimall-blog.vercel.app/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jimall-blog.vercel.app/posts/technology/github-acitons/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="使用 Github actions 自动发布 Hugo 博客"><meta property="og:description" content="使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。
搞的过程中坑比较多，记录为一个教程，供各位参考。
我折腾过程中的参考：https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/
创建代码仓库和 github pages 仓库 构建过程中采用两个仓库：
代码仓库，github pages 在这里构建并发布，我们设为 username.github.io.source github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 username.github.io （username 改为你自己的 github username） 简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。
创建 github pages 仓库 没啥特别，github 上创建一个空仓库 username.github.io
创建代码仓库 这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：
github 创建空仓库 username.github.io.source
本地找个空文件夹，比如叫 HugoBlog，进去之后初始化 Hugo Blog：hugo new site . 初始化 git 仓库：git init 添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 joway/hugo-theme-yinyang，那么命令为：git submodule add git@github."><meta property="og:type" content="article"><meta property="og:url" content="https://jimall-blog.vercel.app/posts/technology/github-acitons/"><meta property="og:image" content="https://jimall-blog.vercel.app/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-31T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-06T05:28:22+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jimall-blog.vercel.app/papermod-cover.png"><meta name=twitter:title content="使用 Github actions 自动发布 Hugo 博客"><meta name=twitter:description content="使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。
搞的过程中坑比较多，记录为一个教程，供各位参考。
我折腾过程中的参考：https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/
创建代码仓库和 github pages 仓库 构建过程中采用两个仓库：
代码仓库，github pages 在这里构建并发布，我们设为 username.github.io.source github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 username.github.io （username 改为你自己的 github username） 简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。
创建 github pages 仓库 没啥特别，github 上创建一个空仓库 username.github.io
创建代码仓库 这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：
github 创建空仓库 username.github.io.source
本地找个空文件夹，比如叫 HugoBlog，进去之后初始化 Hugo Blog：hugo new site . 初始化 git 仓库：git init 添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 joway/hugo-theme-yinyang，那么命令为：git submodule add git@github."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jimall-blog.vercel.app/posts/"},{"@type":"ListItem","position":2,"name":"使用 Github actions 自动发布 Hugo 博客","item":"https://jimall-blog.vercel.app/posts/technology/github-acitons/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用 Github actions 自动发布 Hugo 博客","name":"使用 Github actions 自动发布 Hugo 博客","description":"使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。\n搞的过程中坑比较多，记录为一个教程，供各位参考。\n我折腾过程中的参考：https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/\n创建代码仓库和 github pages 仓库 构建过程中采用两个仓库：\n代码仓库，github pages 在这里构建并发布，我们设为 username.github.io.source github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 username.github.io （username 改为你自己的 github username） 简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。\n创建 github pages 仓库 没啥特别，github 上创建一个空仓库 username.github.io\n创建代码仓库 这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：\ngithub 创建空仓库 username.github.io.source\n本地找个空文件夹，比如叫 HugoBlog，进去之后初始化 Hugo Blog：hugo new site . 初始化 git 仓库：git init 添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 joway/hugo-theme-yinyang，那么命令为：git submodule add git@github.","keywords":["GitHub Actions"],"articleBody":"使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。\n搞的过程中坑比较多，记录为一个教程，供各位参考。\n我折腾过程中的参考：https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/\n创建代码仓库和 github pages 仓库 构建过程中采用两个仓库：\n代码仓库，github pages 在这里构建并发布，我们设为 username.github.io.source github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 username.github.io （username 改为你自己的 github username） 简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。\n创建 github pages 仓库 没啥特别，github 上创建一个空仓库 username.github.io\n创建代码仓库 这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：\ngithub 创建空仓库 username.github.io.source\n本地找个空文件夹，比如叫 HugoBlog，进去之后初始化 Hugo Blog：hugo new site . 初始化 git 仓库：git init 添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 joway/hugo-theme-yinyang，那么命令为：git submodule add git@github.com:joway/hugo-theme-yinyang.git themes/yinyang 然后根据主题去配置去添加文章，用 hugo serve 看看效果，确定配置没问题\n然后是关键的一部，添加 workflows 文件，用于 github actions 构建。创建 .github/workflows/gh-pages.yml 文件，将下面的内容复制进去，并且根据自己的情况修改下面 TODO 表明的类。\nname: github pages CI # 自动化的名称，随便取 on: push: # push的时候触发 branches: - main # TODO 改成 username.github.io.source 的对应主分支 jobs: build: runs-on: ubuntu-latest steps: - name: checkout uses: actions/checkout@master with: submodules: true - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: '0.83.1' extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} # 这个 ACTIONS_DEPLOY_KEY 需要注意，后面会用到 external_repository: username/username.github.io # TODO 改成对应的仓库名 publish_branch: main # TODO 发布到 username.github.io 的相应分支 publish_dir: ./public 需要知道的是，基本上最后搞不出来都会是因为这个文件，所以务必仔细检查配置，如果配置正确的情况下还是出现问题那么需要去看 hugo github actions 的提供方的文档，也就是 peaceiris/actions-gh-pages 这个项目。（我就是网上折腾了好久发现是配置不对 xD）\n添加公钥和私钥。代码仓库需要有 github pages 的写入权限，需要添加公钥和私钥：（注意这个和 github 添加 ssh 链接的私钥不一样，无论如何都要做这一步）\n使用 ssh-keygen -t rsa -b 4096 -C \"$(git config user.email)\" 创建公钥私钥，在当前文件夹生成即可： 将生产后的私钥（不带后缀名的）添加到代码仓库，仓库的 Settings 中点击 Secrets，然后添加咱们刚刚生成的私钥，name 为 ACTIONS_DEPLOY_KEY，注意 name 一定要是这个，因为上面的文件中配置的是这个名字 然后将公钥（带 pub 后缀名的）添加到 github pages 仓库，Settings 中点击 Deploy keys，添加公钥，Allow write access一定要勾上，否则会无法提交 公钥和私钥可以删掉，后面不需要了 将代码仓库 add commit push 到远程，基本操作，不多赘述\n查看代码仓库的 actions，这个时候基本会 build 完成，如果失败了仔细检查步骤。\nothers 本次折腾过程中看到一些不了解的东西，打算去折腾一下：\n非对称加密 git submodule ","wordCount":"229","inLanguage":"en","image":"https://jimall-blog.vercel.app/papermod-cover.png","datePublished":"2021-05-31T00:00:00Z","dateModified":"2022-05-06T05:28:22.43Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://jimall-blog.vercel.app/posts/technology/github-acitons/"},"publisher":{"@type":"Organization","name":"Jimall's Blog","logo":{"@type":"ImageObject","url":"https://jimall-blog.vercel.app/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jimall-blog.vercel.app/ accesskey=h title="Jimall's Blog (Alt + H)">Jimall's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jimall-blog.vercel.app/archives title=Archive><span>Archive</span></a></li><li><a href=https://jimall-blog.vercel.app/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">使用 Github actions 自动发布 Hugo 博客</h1><div class=post-meta><span title='2021-05-31 00:00:00 +0000 UTC'>May 31, 2021</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%88%9b%e5%bb%ba%e4%bb%a3%e7%a0%81%e4%bb%93%e5%ba%93%e5%92%8c-github-pages-%e4%bb%93%e5%ba%93 aria-label="创建代码仓库和 github pages 仓库">创建代码仓库和 github pages 仓库</a><ul><li><a href=#%e5%88%9b%e5%bb%ba-github-pages-%e4%bb%93%e5%ba%93 aria-label="创建 github pages 仓库">创建 github pages 仓库</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e4%bb%a3%e7%a0%81%e4%bb%93%e5%ba%93 aria-label=创建代码仓库>创建代码仓库</a></li></ul></li><li><a href=#others aria-label=others>others</a></li></ul></div></details></div><div class=post-content><p>使用 hugo 写博客的时候，每次增加文章，需要本地构建之后发布到 github 上通过 github pages 服务展示页面，不难想到可以使用 CI 的方法，将构建的过程自动化，实现写博文 push 到 github 即可自动构建并发布到 github pages。</p><p>搞的过程中坑比较多，记录为一个教程，供各位参考。</p><p>我折腾过程中的参考：<a href=https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/>https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/</a></p><h2 id=创建代码仓库和-github-pages-仓库>创建代码仓库和 github pages 仓库<a hidden class=anchor aria-hidden=true href=#创建代码仓库和-github-pages-仓库>#</a></h2><p>构建过程中采用两个仓库：</p><ol><li>代码仓库，github pages 在这里构建并发布，我们设为 <code>username.github.io.source</code></li><li>github pages 仓库，用于存放构建好的文件，github pages 服务会根据构建好的文件展示我们的博。客，我们设为 <code>username.github.io</code>
（username 改为你自己的 github username）</li></ol><p>简单说来就是根据代码仓库的文件构建，构建好之后发布到 github pages 仓库，github pages 仓库由于有 github 提供的服务，会自动展示我们的 blog。</p><h3 id=创建-github-pages-仓库>创建 github pages 仓库<a hidden class=anchor aria-hidden=true href=#创建-github-pages-仓库>#</a></h3><p>没啥特别，github 上创建一个空仓库 <code>username.github.io</code></p><h3 id=创建代码仓库>创建代码仓库<a hidden class=anchor aria-hidden=true href=#创建代码仓库>#</a></h3><p>这个仓库和我们本地直接关联，创建有一些细节需要注意，我下面的过程给各位参考：</p><ol><li><p>github 创建空仓库 <code>username.github.io.source</code></p></li><li><p>本地找个空文件夹，比如叫 <code>HugoBlog</code>，进去之后初始化 Hugo Blog：<code>hugo new site .</code>
<img loading=lazy src=https://cdn.jsdelivr.net/gh/shangjihao/images/blog/20210531130745.png alt></p></li><li><p>初始化 git 仓库：<code>git init</code>
<img loading=lazy src=https://cdn.jsdelivr.net/gh/shangjihao/images/blog/20210531130806.png alt></p></li><li><p>添加主题文件，这步需要注意，需要使用 git submodule 来进行（照着做就完了，不需要深入了解），比如我这边采用的主题文件为 <code>joway/hugo-theme-yinyang</code>，那么命令为：<code>git submodule add git@github.com:joway/hugo-theme-yinyang.git themes/yinyang</code>
<img loading=lazy src=https://cdn.jsdelivr.net/gh/shangjihao/images/blog/20210531130855.png alt></p></li><li><p>然后根据主题去配置去添加文章，用 <code>hugo serve</code> 看看效果，确定配置没问题</p></li><li><p>然后是关键的一部，添加 workflows 文件，用于 github actions 构建。创建 <code>.github/workflows/gh-pages.yml</code> 文件，将下面的内容复制进去，并且根据自己的情况修改下面 TODO 表明的类。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span> <span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages CI</span> <span style=color:#75715e># 自动化的名称，随便取</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>push</span>: <span style=color:#75715e># push的时候触发</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>             - <span style=color:#ae81ff>main</span> <span style=color:#75715e># TODO 改成 username.github.io.source 的对应主分支</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>         - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>checkout</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@master</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>                 <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>         - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>                 <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.83.1&#39;</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>         - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>         - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>                 <span style=color:#f92672>deploy_key</span>: <span style=color:#ae81ff>${{ secrets.ACTIONS_DEPLOY_KEY }}</span> <span style=color:#75715e># 这个 ACTIONS_DEPLOY_KEY 需要注意，后面会用到</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>external_repository</span>: <span style=color:#ae81ff>username/username.github.io</span> <span style=color:#75715e># TODO 改成对应的仓库名</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>publish_branch</span>: <span style=color:#ae81ff>main</span> <span style=color:#75715e># TODO 发布到 username.github.io 的相应分支</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><p>需要知道的是，基本上最后搞不出来都会是因为这个文件，所以务必仔细检查配置，如果配置正确的情况下还是出现问题那么需要去看 hugo github actions 的提供方的文档，也就是 peaceiris/actions-gh-pages 这个项目。（我就是网上折腾了好久发现是配置不对 xD）</p></li><li><p>添加公钥和私钥。代码仓库需要有 github pages 的写入权限，需要添加公钥和私钥：（注意这个和 github 添加 ssh 链接的私钥不一样，无论如何都要做这一步）</p><ol><li>使用 <code>ssh-keygen -t rsa -b 4096 -C "$(git config user.email)"</code> 创建公钥私钥，在当前文件夹生成即可：
<img loading=lazy src=https://cdn.jsdelivr.net/gh/shangjihao/images/blog/20210531143428.png alt></li><li>将生产后的私钥（不带后缀名的）添加到代码仓库，仓库的 Settings 中点击 Secrets，然后添加咱们刚刚生成的私钥，name 为 ACTIONS_DEPLOY_KEY，注意 name 一定要是这个，因为上面的文件中配置的是这个名字</li><li>然后将公钥（带 pub 后缀名的）添加到 github pages 仓库，Settings 中点击 Deploy keys，添加公钥，Allow write access一定要勾上，否则会无法提交</li><li>公钥和私钥可以删掉，后面不需要了</li></ol></li><li><p>将代码仓库 add commit push 到远程，基本操作，不多赘述</p></li><li><p>查看代码仓库的 actions，这个时候基本会 build 完成，如果失败了仔细检查步骤。</p></li></ol><h2 id=others>others<a hidden class=anchor aria-hidden=true href=#others>#</a></h2><p>本次折腾过程中看到一些不了解的东西，打算去折腾一下：</p><ol><li>非对称加密</li><li><a href=/posts/technology/git-submodule/>git submodule</a></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://jimall-blog.vercel.app/tags/github-actions/>GitHub Actions</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://jimall-blog.vercel.app/>Jimall's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>