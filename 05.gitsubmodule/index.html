<!DOCTYPE html>
<html lang="">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>git submodule 的使用 - Jimall的博客</title><meta name="Description" content=""><meta property="og:title" content="git submodule 的使用" />
<meta property="og:description" content="在 Git 项目中，需要包含别的 Git 项目，我们希望能够独立的使用这两个项目。比如我们的博客是一个 Git 项目，而我们需要在博客中包含别人的项目作为博客主题，我们希望能够在自己写博文后 push 不影响博客主题仓库，同时希望能够独立使用主题仓库，这样我们就可以获取最新的主题。
这个时候需要用到 git submodule。在使用 submodule 之后，两个项目便相对独立（或者多个 submodule，那么就是多个项目相对独立）。下面介绍子模块常用的用法：
使用子模块 添加子模块 在 Git 项目中包含别的 Git 项目，不能够直接到相应文件夹 clone，而需要使用 git add submodule 命令，可以将这个命令视为子模块版本的 git clone。
1  git add submodule git@github.com/example/example.git submodule   上面的命令将项目克隆到 submodule 目录。会发现根目录生成了一个 .gitmodule 文件，这个文件用于保存子模块信息。
查看子模块 使用 git submodule 命令查看当前项目的子模块。
更新子模块 在项目中使用 git update 父模块并不会更新子模块。（别的操作同理，我们在项目中使用的各种以前使用的 git 操作都只会对父模块产生作用）
使用 git submodule add 添加子项目。
操作子模块 在子模块的文件夹内部，我们的各种操作都是对子模块的项目产生作用，比如 push 就是将子模块 push 到子模块的 remote repository。
所以需要单独修改子模块，只需要 cd 到子模块内，把子模块当成一个普通的 git 项目即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jimall.github.io/05.gitsubmodule/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-31T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-05-31T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="git submodule 的使用"/>
<meta name="twitter:description" content="在 Git 项目中，需要包含别的 Git 项目，我们希望能够独立的使用这两个项目。比如我们的博客是一个 Git 项目，而我们需要在博客中包含别人的项目作为博客主题，我们希望能够在自己写博文后 push 不影响博客主题仓库，同时希望能够独立使用主题仓库，这样我们就可以获取最新的主题。
这个时候需要用到 git submodule。在使用 submodule 之后，两个项目便相对独立（或者多个 submodule，那么就是多个项目相对独立）。下面介绍子模块常用的用法：
使用子模块 添加子模块 在 Git 项目中包含别的 Git 项目，不能够直接到相应文件夹 clone，而需要使用 git add submodule 命令，可以将这个命令视为子模块版本的 git clone。
1  git add submodule git@github.com/example/example.git submodule   上面的命令将项目克隆到 submodule 目录。会发现根目录生成了一个 .gitmodule 文件，这个文件用于保存子模块信息。
查看子模块 使用 git submodule 命令查看当前项目的子模块。
更新子模块 在项目中使用 git update 父模块并不会更新子模块。（别的操作同理，我们在项目中使用的各种以前使用的 git 操作都只会对父模块产生作用）
使用 git submodule add 添加子项目。
操作子模块 在子模块的文件夹内部，我们的各种操作都是对子模块的项目产生作用，比如 push 就是将子模块 push 到子模块的 remote repository。
所以需要单独修改子模块，只需要 cd 到子模块内，把子模块当成一个普通的 git 项目即可。"/>
<meta name="application-name" content="Jimall的博客">
<meta name="apple-mobile-web-app-title" content="Jimall的博客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jimall.github.io/05.gitsubmodule/" /><link rel="prev" href="https://jimall.github.io/04.hugoactions/" /><link rel="next" href="https://jimall.github.io/06.encryption/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "git submodule 的使用",
        "inLanguage": "",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jimall.github.io\/05.gitsubmodule\/"
        },"image": ["https:\/\/jimall.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  161 ,
        "url": "https:\/\/jimall.github.io\/05.gitsubmodule\/","datePublished": "2021-05-31T00:00:00+00:00","dateModified": "2021-05-31T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/jimall.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "xxxx"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jimall的博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jimall的博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">git submodule 的使用</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>xxxx</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/git/"><i class="far fa-folder fa-fw"></i>git</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-05-31">2021-05-31</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 161 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 1 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#使用子模块">使用子模块</a>
      <ul>
        <li><a href="#添加子模块">添加子模块</a></li>
        <li><a href="#查看子模块">查看子模块</a></li>
        <li><a href="#更新子模块">更新子模块</a></li>
        <li><a href="#操作子模块">操作子模块</a></li>
      </ul>
    </li>
    <li><a href="#克隆含有子模块的项目">克隆含有子模块的项目</a>
      <ul>
        <li><a href="#先克隆父项目再更新子模块">先克隆父项目，再更新子模块</a></li>
        <li><a href="#递归克隆整个项目">递归克隆整个项目</a></li>
      </ul>
    </li>
    <li><a href="#删除子模块">删除子模块</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>在 Git 项目中，需要包含别的 Git 项目，我们希望能够独立的使用这两个项目。比如我们的博客是一个 Git 项目，而我们需要在博客中包含别人的项目作为博客主题，我们希望能够在自己写博文后 push 不影响博客主题仓库，同时希望能够独立使用主题仓库，这样我们就可以获取最新的主题。</p>
<p>这个时候需要用到 git submodule。在使用 submodule 之后，两个项目便相对独立（或者多个 submodule，那么就是多个项目相对独立）。下面介绍子模块常用的用法：</p>
<h2 id="使用子模块">使用子模块</h2>
<h3 id="添加子模块">添加子模块</h3>
<p>在 Git 项目中包含别的 Git 项目，不能够直接到相应文件夹 clone，而需要使用 <code>git add submodule</code> 命令，可以将这个命令视为子模块版本的 <code>git clone</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git add submodule git@github.com/example/example.git submodule
</code></pre></td></tr></table>
</div>
</div><p>上面的命令将项目克隆到 submodule 目录。会发现根目录生成了一个 .gitmodule 文件，这个文件用于保存子模块信息。</p>
<h3 id="查看子模块">查看子模块</h3>
<p>使用 <code>git submodule</code> 命令查看当前项目的子模块。</p>
<h3 id="更新子模块">更新子模块</h3>
<p>在项目中使用 <code>git update</code> 父模块并不会更新子模块。（别的操作同理，我们在项目中使用的各种以前使用的 git 操作都只会对父模块产生作用）</p>
<p>使用 <code>git submodule add</code> 添加子项目。</p>
<h3 id="操作子模块">操作子模块</h3>
<p>在子模块的文件夹内部，我们的各种操作都是对子模块的项目产生作用，比如 push 就是将子模块 push 到子模块的 remote repository。</p>
<p>所以需要单独修改子模块，只需要 cd 到子模块内，把子模块当成一个普通的 git 项目即可。</p>
<h2 id="克隆含有子模块的项目">克隆含有子模块的项目</h2>
<p>克隆包含子模块的项目有两种方法：</p>
<ol>
<li>先克隆父项目，再更新子模块</li>
<li>递归克隆整个项目。</li>
</ol>
<h3 id="先克隆父项目再更新子模块">先克隆父项目，再更新子模块</h3>
<p>这种方法有以下步骤：</p>
<ol>
<li>克隆父项目：<code>git clone xxx</code>。注意这种情况下，像之前说的，在父项目中的操作，只对父项目产生作用，所以子项目不会被 clone。</li>
<li>查看子模块：<code>git submodule</code>。会发现子模块前面有一个 <code>-</code>，说明子模块文件还未被 clone（为空文件夹）。
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ git submodule
-e33f854d3f51f5ebd771a68da05ad0371a3c0570 xxx
</code></pre></td></tr></table>
</div>
</div></li>
<li>初始化子模块：<code>git submodule init</code>。在父模块 clone 之后运行一次，就行了。</li>
<li>更新子模块：<code>git submodule update</code>。运行后子模块被 clone，整个项目就 ready 了。</li>
</ol>
<h3 id="递归克隆整个项目">递归克隆整个项目</h3>
<p>clone 的时候，添加 <code>--recursive</code> 指令，递归克隆子模块，一步到位。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git clone xxxx --recursive
</code></pre></td></tr></table>
</div>
</div><h2 id="删除子模块">删除子模块</h2>
<p>删除子模块比较麻烦，需要手动删除相关的文件，否则在添加子模块时有可能出现错误</p>
<p>以删除 assets 文件夹为例</p>
<ol>
<li>
<p>删除子模块文件夹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ git rm --cached assets
$ rm -rf assets
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>删除 .gitmodules 文件中相关子模块信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[submodule &#34;assets&#34;]
    path = assets
    url = https://github.com/maonx/vimwiki-assets.git
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>删除 .git/config 中的相关子模块信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[submodule &#34;assets&#34;]
    url = https://github.com/maonx/vimwiki-assets.git
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>删除 .git 文件夹中的相关子模块文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ rm -rf .git/modules/assets
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-05-31</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/05.gitsubmodule/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://jimall.github.io/05.gitsubmodule/" data-title="git submodule 的使用" data-via="xxxx"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://jimall.github.io/05.gitsubmodule/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://jimall.github.io/05.gitsubmodule/" data-title="git submodule 的使用"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://jimall.github.io/05.gitsubmodule/" data-title="git submodule 的使用"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://jimall.github.io/05.gitsubmodule/" data-title="git submodule 的使用"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/04.hugoactions/" class="prev" rel="prev" title="使用 Github actions 自动发布 Hugo 博客"><i class="fas fa-angle-left fa-fw"></i>使用 Github actions 自动发布 Hugo 博客</a>
            <a href="/06.encryption/" class="next" rel="next" title="加密算法">加密算法<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">xxxx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":100},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
